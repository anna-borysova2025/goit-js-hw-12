{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\n    const BASE_URL = 'https://pixabay.com/api/';\n    const API_KEY = import.meta.env.VITE_PIXABAY_KEY;\n\nexport async function getImagesByQuery(query, page = 1) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: 15\n    };\n    try {\n        const res = await axios.get(BASE_URL, { params });\n    return res.data;\n} catch (error) {\n    throw error;\n}\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" />\n          </a>\n          <ul class=\"stats\">\n  <li class=\"stats-item\">\n    <span class=\"stats-label\">Likes</span>\n    <span class=\"stats-value\">${likes}</span>\n  </li>\n  <li class=\"stats-item\">\n    <span class=\"stats-label\">Views</span>\n    <span class=\"stats-value\">${views}</span>\n  </li>\n  <li class=\"stats-item\">\n    <span class=\"stats-label\">Comments</span>\n    <span class=\"stats-value\">${comments}</span>\n  </li>\n  <li class=\"stats-item\">\n    <span class=\"stats-label\">Downloads</span>\n    <span class=\"stats-value\">${downloads}</span>\n  </li>\n</ul>\n        </li>\n    `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionsData: 'alt',\n      captionDelay: 250,\n      captionPosition: 'bottom',\n    });\n  }\n}\n\nexport function clearGallery() {\ngallery.innerHTML = '';\n}\n\nexport function showLoader() {\nloader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\nloader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\nloadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\nloadMoreBtn.classList.add('hidden');\n}\n","import iziToast from 'izitoast'\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions.js';\n\nconst formElem = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nformElem.addEventListener('submit', async e => {\n e.preventDefault();\n const formData = new FormData(formElem);\nquery = (formData.get('search-text') || '').trim();\n  if (!query) {\n    iziToast.warning({\n      message: 'Please enter a search query',\n      position: 'topRight', });\nreturn; \n}\n\n  showLoader();\n  clearGallery();\n  hideLoadMoreButton();\n  page = 1;\n\ntry {\n    const data = await getImagesByQuery(query, page);\nconst { hits = [], totalHits: total = 0 } = data;\ntotalHits = total; \n   \nif (hits.length === 0) {\n      iziToast.error({\n        message: 'No images found. Try another query.',\n        position: 'topRight',\n      });\n      return;\n    }\n    createGallery(hits);\n    if (totalHits > 15) {\nshowLoadMoreButton();\n    }\n } catch (error) {\n      iziToast.error({\n        message: 'Request failed',\n        position: 'topRight',\n      });\n    } finally {\n      hideLoader();\n      formElem.reset();\n    }\n}); \nloadMoreBtn.addEventListener('click', async () => { \n    page += 1; \n    hideLoadMoreButton();\n    showLoader();\n    try {\n       const data = await getImagesByQuery(query, page);\n       const { hits = [] } = data;\n       createGallery(hits);\n       const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n       window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n       });\n       if (page * 15 < totalHits) {\n        showLoadMoreButton();\n       } else {\niziToast.info({\n    message: \"We're sorry, but you've reached the end of search results\",\n    position: \"topRight\",\n});\n       }\n    } catch (error) {\n    iziToast.error ({\n        message: 'Request failed',\n        position: 'topRight',\n      });\n      showLoadMoreButton();\n    } finally {\n        hideLoader();\n    }\n});"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","page","params","axios","error","lightbox","gallery","loader","loadMoreBtn","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","formElem","totalHits","e","iziToast","data","hits","total","cardHeight"],"mappings":"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"}