{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\n    const BASE_URL = 'https://pixabay.com/api/';\r\n    const API_KEY = import.meta.env.VITE_PIXABAY_KEY;\r\n\r\nexport async function getImagesByQuery(query, page = 1) {\r\n    const params = {\r\n        key: API_KEY,\r\n        q: query,\r\n        image_type: 'photo',\r\n        orientation: 'horizontal',\r\n        safesearch: true,\r\n        page,\r\n        per_page: 15\r\n    };\r\n    try {\r\n        const res = await axios.get(BASE_URL, { params });\r\n    return res.data;\r\n} catch (error) {\r\n    throw error;\r\n}\r\n}\r\n\r\n","import SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\n\r\nlet lightbox;\r\nconst gallery = document.querySelector('.gallery');\r\nconst loader = document.querySelector('.loader');\r\nconst loadMoreBtn = document.querySelector('.load-more');\r\n\r\n\r\nexport function createGallery(images) {\r\n  const markup = images\r\n    .map(\r\n      ({\r\n        webformatURL,\r\n        largeImageURL,\r\n        tags,\r\n        likes,\r\n        views,\r\n        comments,\r\n        downloads,\r\n      }) => `\r\n        <li class=\"gallery-item\">\r\n          <a href=\"${largeImageURL}\">\r\n            <img src=\"${webformatURL}\" alt=\"${tags}\" />\r\n          </a>\r\n          <ul class=\"stats\">\r\n  <li class=\"stats-item\">\r\n    <span class=\"stats-label\">Likes</span>\r\n    <span class=\"stats-value\">${likes}</span>\r\n  </li>\r\n  <li class=\"stats-item\">\r\n    <span class=\"stats-label\">Views</span>\r\n    <span class=\"stats-value\">${views}</span>\r\n  </li>\r\n  <li class=\"stats-item\">\r\n    <span class=\"stats-label\">Comments</span>\r\n    <span class=\"stats-value\">${comments}</span>\r\n  </li>\r\n  <li class=\"stats-item\">\r\n    <span class=\"stats-label\">Downloads</span>\r\n    <span class=\"stats-value\">${downloads}</span>\r\n  </li>\r\n</ul>\r\n        </li>\r\n    `\r\n    )\r\n    .join('');\r\n\r\n  gallery.insertAdjacentHTML('beforeend', markup);\r\n\r\n  if (lightbox) {\r\n    lightbox.refresh();\r\n  } else {\r\n    lightbox = new SimpleLightbox('.gallery a', {\r\n      captions: true,\r\n      captionsData: 'alt',\r\n      captionDelay: 250,\r\n      captionPosition: 'bottom',\r\n    });\r\n  }\r\n}\r\n\r\nexport function clearGallery() {\r\ngallery.innerHTML = '';\r\n}\r\n\r\nexport function showLoader() {\r\nloader.classList.remove('hidden');\r\n}\r\n\r\nexport function hideLoader() {\r\nloader.classList.add('hidden');\r\n}\r\n\r\nexport function showLoadMoreButton() {\r\nloadMoreBtn.classList.remove('hidden');\r\n}\r\n\r\nexport function hideLoadMoreButton() {\r\nloadMoreBtn.classList.add('hidden');\r\n}\r\n","import iziToast from 'izitoast'\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n\r\nimport { getImagesByQuery } from './js/pixabay-api.js';\r\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions.js';\r\n\r\nconst formElem = document.querySelector('.form');\r\nconst loadMoreBtn = document.querySelector('.load-more');\r\nlet query = '';\r\nlet page = 1;\r\nlet totalHits = 0;\r\n\r\nformElem.addEventListener('submit', async e => {\r\n e.preventDefault();\r\n const formData = new FormData(formElem);\r\nquery = (formData.get('search-text') || '').trim();\r\n  if (!query) {\r\n    iziToast.warning({\r\n      message: 'Please enter a search query',\r\n      position: 'topRight', });\r\nreturn; \r\n}\r\n\r\n  showLoader();\r\n  clearGallery();\r\n  hideLoadMoreButton();\r\n  page = 1;\r\n\r\ntry {\r\n    const data = await getImagesByQuery(query, page);\r\nconst { hits = [], totalHits: total = 0 } = data;\r\ntotalHits = total; \r\n   \r\nif (hits.length === 0) {\r\n      iziToast.error({\r\n        message: 'No images found. Try another query.',\r\n        position: 'topRight',\r\n      });\r\n      return;\r\n    }\r\n    createGallery(hits);\r\n    if (totalHits > 15) {\r\nshowLoadMoreButton();\r\n    }\r\n } catch (error) {\r\n      iziToast.error({\r\n        message: 'Request failed',\r\n        position: 'topRight',\r\n      });\r\n    } finally {\r\n      hideLoader();\r\n      formElem.reset();\r\n    }\r\n}); \r\nloadMoreBtn.addEventListener('click', async () => { \r\n    page += 1; \r\n    hideLoadMoreButton();\r\n    showLoader();\r\n    try {\r\n       const data = await getImagesByQuery(query, page);\r\n       const { hits = [] } = data;\r\n       createGallery(hits);\r\n       const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\r\n       window.scrollBy({\r\n        top: cardHeight * 2,\r\n        behavior: 'smooth',\r\n       });\r\n       if (page * 15 < totalHits) {\r\n        showLoadMoreButton();\r\n       } else {\r\niziToast.info({\r\n    message: \"We're sorry, but you've reached the end of search results\",\r\n    position: \"topRight\",\r\n});\r\n       }\r\n    } catch (error) {\r\n    iziToast.error ({\r\n        message: 'Request failed',\r\n        position: 'topRight',\r\n      });\r\n      showLoadMoreButton();\r\n    } finally {\r\n        hideLoader();\r\n    }\r\n});"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","page","params","axios","error","lightbox","gallery","loader","loadMoreBtn","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","formElem","totalHits","e","iziToast","data","hits","total","cardHeight"],"mappings":"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"}